/**
 * @license
 * Copyright Google LLC All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@angular/animations"),require("@angular/cdk/a11y"),require("@angular/cdk/portal"),require("@angular/common"),require("@angular/core"),require("rxjs"),require("rxjs/operators"),require("@angular/cdk/keycodes"),require("@angular/cdk/overlay"),require("@angular/cdk/bidi")):"function"==typeof define&&define.amd?define("@angular/cdk-experimental/dialog",["exports","@angular/animations","@angular/cdk/a11y","@angular/cdk/portal","@angular/common","@angular/core","rxjs","rxjs/operators","@angular/cdk/keycodes","@angular/cdk/overlay","@angular/cdk/bidi"],e):e((t.ng=t.ng||{},t.ng.cdkExperimental=t.ng.cdkExperimental||{},t.ng.cdkExperimental.dialog={}),t.ng.animations,t.ng.cdk.a11y,t.ng.cdk.portal,t.ng.common,t.ng.core,t.rxjs,t.rxjs.operators,t.ng.cdk.keycodes,t.ng.cdk.overlay,t.ng.cdk.bidi)}(this,function(t,e,o,n,i,r,a,s,l,c,u){"use strict";function p(t,e){function o(){this.constructor=t}h(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}function f(){throw Error("Attempting to attach dialog content after content is already attached")}function d(t){return function(){return t.scrollStrategies.block()}}var h=function(t,e){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},g=function(){return g=Object.assign||function(t){for(var e,o=1,n=arguments.length;o<n;o++){e=arguments[o];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},g.apply(this,arguments)},y=function(){function t(){this.role="dialog",this.panelClass="",this.hasBackdrop=!0,this.backdropClass="",this.disableClose=!1,this.width="",this.height="",this.minWidth="",this.minHeight="",this.maxWidth="80vw",this.maxHeight="",this.data=null,this.ariaDescribedBy=null,this.ariaLabel=null,this.autoFocus=!0,this.enterAnimationDuration="225ms",this.exitAnimationDuration="225ms"}return t}(),_=function(t){function l(e,o,n,i,r){var l=t.call(this)||this;return l._elementRef=e,l._focusTrapFactory=o,l._changeDetectorRef=n,l._document=i,l._config=r,l._state="enter",l._elementFocusedBeforeDialogWasOpened=null,l._focusTrap=l._focusTrapFactory.create(l._elementRef.nativeElement,!1),l._beforeEnter=new a.Subject,l._afterEnter=new a.Subject,l._beforeExit=new a.Subject,l._afterExit=new a.Subject,l._animationDone=new a.Subject,l._animationDone.pipe(s.distinctUntilChanged(function(t,e){return t.fromState===e.fromState&&t.toState===e.toState})).subscribe(function(t){"enter"===t.toState&&(l._autoFocusFirstTabbableElement(),l._afterEnter.next(),l._afterEnter.complete()),"enter"!==t.fromState||"void"!==t.toState&&"exit"!==t.toState||(l._returnFocusAfterDialog(),l._afterExit.next(),l._afterExit.complete())}),l}return p(l,t),Object.defineProperty(l.prototype,"_ariaLabel",{get:function(){return this._config.ariaLabel||null},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"_ariaDescribedBy",{get:function(){return this._config.ariaDescribedBy},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"_role",{get:function(){return this._config.role},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"_tabindex",{get:function(){return-1},enumerable:!0,configurable:!0}),l.prototype.ngOnDestroy=function(){this._focusTrap.destroy(),this._animationDone.complete()},l.prototype.attachComponentPortal=function(t){return this._portalHost.hasAttached()&&f(),this._savePreviouslyFocusedElement(),this._portalHost.attachComponentPortal(t)},l.prototype.attachTemplatePortal=function(t){return this._portalHost.hasAttached()&&f(),this._savePreviouslyFocusedElement(),this._portalHost.attachTemplatePortal(t)},l.prototype._onAnimationStart=function(t){"enter"===t.toState&&(this._beforeEnter.next(),this._beforeEnter.complete()),"enter"!==t.fromState||"void"!==t.toState&&"exit"!==t.toState||(this._beforeExit.next(),this._beforeExit.complete())},l.prototype._startExiting=function(){this._state="exit",this._changeDetectorRef.markForCheck()},l.prototype._savePreviouslyFocusedElement=function(){var t=this;this._document&&(this._elementFocusedBeforeDialogWasOpened=this._document.activeElement,Promise.resolve().then(function(){return t._elementRef.nativeElement.focus()}))},l.prototype._autoFocusFirstTabbableElement=function(){var t=this;this._config.autoFocus&&this._focusTrap.focusInitialElementWhenReady().then(function(e){e||t._elementRef.nativeElement.focus()})},l.prototype._returnFocusAfterDialog=function(){var t=this._elementFocusedBeforeDialogWasOpened;t&&"function"==typeof t.focus&&t.focus()},l.decorators=[{type:r.Component,args:[{selector:"cdk-dialog-container",template:"<ng-template cdkPortalOutlet></ng-template>",styles:["cdk-dialog-container{background:#fff;border-radius:5px;display:block;padding:10px}"],encapsulation:r.ViewEncapsulation.None,changeDetection:r.ChangeDetectionStrategy.Default,animations:[e.trigger("dialog",[e.state("enter",e.style({opacity:1})),e.state("exit, void",e.style({opacity:0})),e.transition("* => enter",e.animate("{{enterAnimationDuration}}")),e.transition("* => exit, * => void",e.animate("{{exitAnimationDuration}}"))])],host:{"[@dialog]":"{\n      value: _state,\n      params: {\n        enterAnimationDuration: _config.enterAnimationDuration,\n        exitAnimationDuration: _config.exitAnimationDuration\n      }\n    }","(@dialog.start)":"_onAnimationStart($event)","(@dialog.done)":"_animationDone.next($event)"}}]}],l.ctorParameters=function(){return[{type:r.ElementRef},{type:o.FocusTrapFactory},{type:r.ChangeDetectorRef},{type:void 0,decorators:[{type:r.Optional},{type:r.Inject,args:[i.DOCUMENT]}]},{type:y}]},l.propDecorators={_ariaLabel:[{type:r.HostBinding,args:["attr.aria-label"]}],_ariaDescribedBy:[{type:r.HostBinding,args:["attr.aria-describedby"]}],_role:[{type:r.HostBinding,args:["attr.role"]}],_tabindex:[{type:r.HostBinding,args:["attr.tabindex"]}],_portalHost:[{type:r.ViewChild,args:[n.PortalHostDirective]}]},l}(n.BasePortalOutlet),m=0,b=function(){function t(t,e,o){void 0===o&&(o="dialog-"+m++);var n=this;this._overlayRef=t,this._containerInstance=e,this.id=o,e._config.hasBackdrop&&t.backdropClick().subscribe(function(){n.disableClose||n.close()}),this.beforeClosed().subscribe(function(){n._overlayRef.detachBackdrop()}),this.afterClosed().subscribe(function(){n._overlayRef.detach(),n._overlayRef.dispose(),n.componentInstance=null}),t.keydownEvents().pipe(s.filter(function(t){return t.keyCode===l.ESCAPE&&!n.disableClose})).subscribe(function(){return n.close()})}return t.prototype.backdropClick=function(){return this._overlayRef.backdropClick()},t.prototype.close=function(t){this._result=t,this._containerInstance._startExiting()},t.prototype.updatePosition=function(t){var e=this._getPositionStrategy();return t&&(t.left||t.right)?t.left?e.left(t.left):e.right(t.right):e.centerHorizontally(),t&&(t.top||t.bottom)?t.top?e.top(t.top):e.bottom(t.bottom):e.centerVertically(),this._overlayRef.updatePosition(),this},t.prototype.keydownEvents=function(){return this._overlayRef.keydownEvents()},t.prototype.updateSize=function(t){return t.width&&this._getPositionStrategy().width(t.width.toString()),t.height&&this._getPositionStrategy().height(t.height.toString()),this._overlayRef.updateSize(t),this._overlayRef.updatePosition(),this},t.prototype._getPositionStrategy=function(){return this._overlayRef.getConfig().positionStrategy},t.prototype.beforeOpened=function(){return this._containerInstance._beforeEnter.asObservable()},t.prototype.afterOpened=function(){return this._containerInstance._afterEnter.asObservable()},t.prototype.beforeClosed=function(){var t=this;return this._containerInstance._beforeExit.pipe(s.map(function(){return t._result}))},t.prototype.afterClosed=function(){var t=this;return this._containerInstance._afterExit.pipe(s.map(function(){return t._result}))},t}(),D=new r.InjectionToken("DialogScrollStrategy"),v=new r.InjectionToken("DialogData"),C=new r.InjectionToken("DialogRef"),O=new r.InjectionToken("DialogConfig"),k=new r.InjectionToken("DialogContainer"),x={provide:D,deps:[c.Overlay],useFactory:d},E=function(){function t(t,e,o,n,i,r){var l=this;this.overlay=t,this.injector=e,this.dialogRefConstructor=o,this._parentDialog=i,this._afterAllClosedBase=new a.Subject,this.afterAllClosed=a.defer(function(){return l.openDialogs.length?l._afterAllClosed:l._afterAllClosed.pipe(s.startWith(void 0))}),this._afterOpened=new a.Subject,this._openDialogs=[],!i&&r&&r.subscribe(function(){return l.closeAll()}),this._scrollStrategy=n}return Object.defineProperty(t.prototype,"_afterAllClosed",{get:function(){return this._parentDialog?this._parentDialog.afterAllClosed:this._afterAllClosedBase},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"afterOpened",{get:function(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpened},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"openDialogs",{get:function(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogs},enumerable:!0,configurable:!0}),t.prototype.getById=function(t){return this._openDialogs.find(function(e){return e.id===t})},t.prototype.closeAll=function(){this.openDialogs.forEach(function(t){return t.close()})},t.prototype.openFromComponent=function(t,e){if(e=this._applyConfigDefaults(e),e.id&&this.getById(e.id))throw Error('Dialog with id "'+e.id+'" exists already. The dialog id must be unique.');var o=this._createOverlay(e),n=this._attachDialogContainer(o,e),i=this._attachDialogContentForComponent(t,n,o,e);return this.registerDialogRef(i),i},t.prototype.openFromTemplate=function(t,e){if(e=this._applyConfigDefaults(e),e.id&&this.getById(e.id))throw Error('Dialog with id "'+e.id+'" exists already. The dialog id must be unique.');var o=this._createOverlay(e),n=this._attachDialogContainer(o,e),i=this._attachDialogContentForTemplate(t,n,o,e);return this.registerDialogRef(i),i},t.prototype.ngOnDestroy=function(){this._openDialogs.forEach(function(t){return t.close()})},t.prototype.registerDialogRef=function(t){var e=this;this.openDialogs.push(t);var o=t.afterOpened().subscribe(function(){e.afterOpened.next(t),o.unsubscribe()}),n=t.afterClosed().subscribe(function(){var o=e._openDialogs.indexOf(t);o>-1&&e._openDialogs.splice(o,1),e._openDialogs.length||(e._afterAllClosedBase.next(),n.unsubscribe())})},t.prototype._createOverlay=function(t){var e=new c.OverlayConfig({positionStrategy:this.overlay.position().global(),scrollStrategy:this._scrollStrategy(),panelClass:t.panelClass,hasBackdrop:t.hasBackdrop,direction:t.direction,minWidth:t.minWidth,minHeight:t.minHeight,maxWidth:t.maxWidth,maxHeight:t.maxHeight});return t.backdropClass&&(e.backdropClass=t.backdropClass),this.overlay.create(e)},t.prototype._attachDialogContainer=function(t,e){var o=e.containerComponent||this.injector.get(k),i=e&&e.viewContainerRef&&e.viewContainerRef.injector,r=new n.PortalInjector(i||this.injector,new WeakMap([[y,e]])),a=new n.ComponentPortal(o,e.viewContainerRef,r),s=t.attach(a);return s.instance._config=e,s.instance},t.prototype._attachDialogContentForComponent=function(t,e,o,i){var r=new this.dialogRefConstructor(o,e,i.id),a=this._createInjector(i,r,e),s=e.attachComponentPortal(new n.ComponentPortal(t,void 0,a));return r.componentInstance=s.instance,r.disableClose=i.disableClose,r.updateSize({width:i.width,height:i.height}).updatePosition(i.position),r},t.prototype._attachDialogContentForTemplate=function(t,e,o,i){var r=new this.dialogRefConstructor(o,e,i.id);return e.attachTemplatePortal(new n.TemplatePortal(t,null,{$implicit:i.data,dialogRef:r})),r.updateSize({width:i.width,height:i.height}).updatePosition(i.position),r},t.prototype._createInjector=function(t,e,o){var i=t&&t.viewContainerRef&&t.viewContainerRef.injector,r=new WeakMap([[this.injector.get(C),e],[this.injector.get(k),o],[v,t.data]]);return!t.direction||i&&i.get(u.Directionality,null)||r.set(u.Directionality,{value:t.direction,change:a.of()}),new n.PortalInjector(i||this.injector,r)},t.prototype._applyConfigDefaults=function(t){var e=this.injector.get(O);return g({},new e,t)},t.decorators=[{type:r.Injectable}],t.ctorParameters=function(){return[{type:c.Overlay},{type:r.Injector},{type:r.Type,decorators:[{type:r.Inject,args:[C]}]},{type:void 0,decorators:[{type:r.Inject,args:[D]}]},{type:t,decorators:[{type:r.Optional},{type:r.SkipSelf}]},{type:i.Location,decorators:[{type:r.Optional}]}]},t}(),w=b,j=_,S=y,A=function(){function t(){}return t.decorators=[{type:r.NgModule,args:[{imports:[i.CommonModule,c.OverlayModule,n.PortalModule,o.A11yModule],exports:[n.PortalModule,_],declarations:[_],providers:[E,x,{provide:C,useValue:w},{provide:k,useValue:j},{provide:O,useValue:S}],entryComponents:[_]}]}],t}();t.throwDialogContentAlreadyAttachedError=f,t.CdkDialogContainer=_,t.DialogConfig=y,t.DialogRef=b,t.Dialog=E,t.DialogModule=A,t.MAT_DIALOG_SCROLL_STRATEGY_PROVIDER_FACTORY=d,t.DIALOG_SCROLL_STRATEGY=D,t.DIALOG_DATA=v,t.DIALOG_REF=C,t.DIALOG_CONFIG=O,t.DIALOG_CONTAINER=k,t.MAT_DIALOG_SCROLL_STRATEGY_PROVIDER=x,Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=cdk-experimental-dialog.umd.min.js.map
